{"version":3,"file":"lskdb.umd.js","sources":["../src/index.ts"],"sourcesContent":["export class LSKDB {\r\n  constructor(private prefix = 'lsm-', private lockKey = 'lsmngr-lock') { }\r\n\r\n  private prefixedKey(key: string | number): string {\r\n    return `${this.prefix}${key}`;\r\n  }\r\n\r\n  getAllKeys(): string[] {\r\n    const res: string[] = [];\r\n    for (const key in localStorage) {\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key.slice(this.prefix.length));\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  getKeys(n = 12, remove = true): string[] {\r\n    const res: string[] = [];\r\n    for (const key in localStorage) {\r\n      if (res.length >= n) break;\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key.slice(this.prefix.length));\r\n      }\r\n    }\r\n    if (remove) {\r\n      res.forEach(k => this.removeKey(k));\r\n    }\r\n    return res;\r\n  }\r\n\r\n  hasKey(key: string | number): boolean {\r\n    return localStorage.getItem(this.prefixedKey(key)) !== null;\r\n  }\r\n\r\n  removeKey(key: string | number): void {\r\n    localStorage.removeItem(this.prefixedKey(key));\r\n  }\r\n\r\n  setKey(key: string | number): void {\r\n    localStorage.setItem(this.prefixedKey(key), '');\r\n  }\r\n\r\n  isLocked(): boolean {\r\n    const lock = parseInt(localStorage.getItem(this.lockKey) as string);\r\n    const locktime = 5 * 60 * 1000; // 5 minutes\r\n    return !(!lock || Date.now() - lock > locktime);\r\n  }\r\n\r\n  lock(value: boolean): void {\r\n    if (value) {\r\n      localStorage.setItem(this.lockKey, JSON.stringify(Date.now()));\r\n    } else {\r\n      localStorage.removeItem(this.lockKey);\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;EAAO,MAAM,MAAM;AAAA,IACjB,YAAoB,SAAS,QAAgB,UAAU,eAAe;AAAlD,WAAA,SAAA;AAAyB,WAAA,UAAA;AAAA,IAA2B;AAAA,IAEhE,YAAY,KAA8B;AAChD,aAAO,GAAG,KAAK,MAAM,GAAG,GAAG;AAAA,IAC7B;AAAA,IAEA,aAAuB;AACrB,YAAM,MAAgB,CAAA;AACtB,iBAAW,OAAO,cAAc;AAC9B,YAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,cAAI,KAAK,IAAI,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,QACxC;AAAA,MACF;AACO,aAAA;AAAA,IACT;AAAA,IAEA,QAAQ,IAAI,IAAI,SAAS,MAAgB;AACvC,YAAM,MAAgB,CAAA;AACtB,iBAAW,OAAO,cAAc;AAC1B,YAAA,IAAI,UAAU,EAAG;AACrB,YAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,cAAI,KAAK,IAAI,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,QACxC;AAAA,MACF;AACA,UAAI,QAAQ;AACV,YAAI,QAAQ,CAAA,MAAK,KAAK,UAAU,CAAC,CAAC;AAAA,MACpC;AACO,aAAA;AAAA,IACT;AAAA,IAEA,OAAO,KAA+B;AACpC,aAAO,aAAa,QAAQ,KAAK,YAAY,GAAG,CAAC,MAAM;AAAA,IACzD;AAAA,IAEA,UAAU,KAA4B;AACpC,mBAAa,WAAW,KAAK,YAAY,GAAG,CAAC;AAAA,IAC/C;AAAA,IAEA,OAAO,KAA4B;AACjC,mBAAa,QAAQ,KAAK,YAAY,GAAG,GAAG,EAAE;AAAA,IAChD;AAAA,IAEA,WAAoB;AAClB,YAAM,OAAO,SAAS,aAAa,QAAQ,KAAK,OAAO,CAAW;AAC5D,YAAA,WAAW,IAAI,KAAK;AAC1B,aAAO,EAAE,CAAC,QAAQ,KAAK,IAAA,IAAQ,OAAO;AAAA,IACxC;AAAA,IAEA,KAAK,OAAsB;AACzB,UAAI,OAAO;AACI,qBAAA,QAAQ,KAAK,SAAS,KAAK,UAAU,KAAK,IAAK,CAAA,CAAC;AAAA,MAAA,OACxD;AACQ,qBAAA,WAAW,KAAK,OAAO;AAAA,MACtC;AAAA,IACF;AAAA,EACF;;;;"}