{"version":3,"file":"lskdb.umd.js","sources":["../src/index.ts"],"sourcesContent":["export class LSKDB {\r\n  constructor(private prefix = 'lsm-', private lockKey = 'lsmngr-lock') { }\r\n\r\n  getAllKeys() {\r\n    const res = [];\r\n    for (const key in localStorage) {\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key);\r\n      }\r\n    }\r\n    return res.map(r => r.slice(this.prefix.length));\r\n  }\r\n\r\n  getKeys(n = 12, remove = true) {\r\n    const res = [];\r\n    for (const key in localStorage) {\r\n      if (res.length >= n) break;\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key);\r\n      }\r\n    }\r\n    if (remove) res.forEach(k => localStorage.removeItem(k));\r\n    return res.map(r => r.slice(this.prefix.length));\r\n  }\r\n\r\n  hasKey(key: string) {\r\n    return Object.hasOwn(localStorage, `${this.prefix}${key}`);\r\n  }\r\n\r\n  removeKey(key: string | number) {\r\n    localStorage.removeItem(`${this.prefix}${key}`);\r\n  }\r\n\r\n  setKey(key: string | number) {\r\n    localStorage.setItem(`${this.prefix}${key}`, '');\r\n  }\r\n\r\n  isLocked() {\r\n    const lock = parseInt(localStorage.getItem(this.lockKey) as string);\r\n    const locktime = 5 * 60 * 1000;\r\n    return !(!lock || Date.now() - lock > locktime);\r\n  }\r\n\r\n  lock(value: boolean) {\r\n    if (value) {\r\n      localStorage.setItem(this.lockKey, JSON.stringify(Date.now()));\r\n    } else {\r\n      localStorage.removeItem(this.lockKey);\r\n    }\r\n  }\r\n}"],"names":[],"mappings":";;;;EAAO,MAAM,MAAM;AAAA,IACjB,YAAoB,SAAS,QAAgB,UAAU,eAAe;AAAlD,WAAA,SAAA;AAAyB,WAAA,UAAA;AAAA,IAA2B;AAAA,IAExE,aAAa;AACX,YAAM,MAAM,CAAA;AACZ,iBAAW,OAAO,cAAc;AAC9B,YAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,cAAI,KAAK,GAAG;AAAA,QACd;AAAA,MACF;AACO,aAAA,IAAI,IAAI,CAAK,MAAA,EAAE,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,IACjD;AAAA,IAEA,QAAQ,IAAI,IAAI,SAAS,MAAM;AAC7B,YAAM,MAAM,CAAA;AACZ,iBAAW,OAAO,cAAc;AAC1B,YAAA,IAAI,UAAU,EAAG;AACrB,YAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,cAAI,KAAK,GAAG;AAAA,QACd;AAAA,MACF;AACA,UAAI,OAAY,KAAA,QAAQ,OAAK,aAAa,WAAW,CAAC,CAAC;AAChD,aAAA,IAAI,IAAI,CAAK,MAAA,EAAE,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,IACjD;AAAA,IAEA,OAAO,KAAa;AACX,aAAA,OAAO,OAAO,cAAc,GAAG,KAAK,MAAM,GAAG,GAAG,EAAE;AAAA,IAC3D;AAAA,IAEA,UAAU,KAAsB;AAC9B,mBAAa,WAAW,GAAG,KAAK,MAAM,GAAG,GAAG,EAAE;AAAA,IAChD;AAAA,IAEA,OAAO,KAAsB;AAC3B,mBAAa,QAAQ,GAAG,KAAK,MAAM,GAAG,GAAG,IAAI,EAAE;AAAA,IACjD;AAAA,IAEA,WAAW;AACT,YAAM,OAAO,SAAS,aAAa,QAAQ,KAAK,OAAO,CAAW;AAC5D,YAAA,WAAW,IAAI,KAAK;AAC1B,aAAO,EAAE,CAAC,QAAQ,KAAK,IAAA,IAAQ,OAAO;AAAA,IACxC;AAAA,IAEA,KAAK,OAAgB;AACnB,UAAI,OAAO;AACI,qBAAA,QAAQ,KAAK,SAAS,KAAK,UAAU,KAAK,IAAK,CAAA,CAAC;AAAA,MAAA,OACxD;AACQ,qBAAA,WAAW,KAAK,OAAO;AAAA,MACtC;AAAA,IACF;AAAA,EACF;;;;"}