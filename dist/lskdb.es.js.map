{"version":3,"file":"lskdb.es.js","sources":["../src/index.ts"],"sourcesContent":["export class LSKDB {\r\n  constructor(private prefix = 'lsm-', private lockKey = 'lsmngr-lock') { }\r\n\r\n  getAllKeys() {\r\n    const res = [];\r\n    for (const key in localStorage) {\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key);\r\n      }\r\n    }\r\n    return res.map(r => r.slice(this.prefix.length));\r\n  }\r\n\r\n  getKeys(n = 12, remove = true) {\r\n    const res = [];\r\n    for (const key in localStorage) {\r\n      if (res.length >= n) break;\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key);\r\n      }\r\n    }\r\n    if (remove) res.forEach(k => localStorage.removeItem(k));\r\n    return res.map(r => r.slice(this.prefix.length));\r\n  }\r\n\r\n  hasKey(key: string) {\r\n    return Object.hasOwn(localStorage, `${this.prefix}${key}`);\r\n  }\r\n\r\n  removeKey(key: string | number) {\r\n    localStorage.removeItem(`${this.prefix}${key}`);\r\n  }\r\n\r\n  setKey(key: string | number) {\r\n    localStorage.setItem(`${this.prefix}${key}`, '');\r\n  }\r\n\r\n  isLocked() {\r\n    const lock = parseInt(localStorage.getItem(this.lockKey) as string);\r\n    const locktime = 5 * 60 * 1000;\r\n    return !(!lock || Date.now() - lock > locktime);\r\n  }\r\n\r\n  lock(value: boolean) {\r\n    if (value) {\r\n      localStorage.setItem(this.lockKey, JSON.stringify(Date.now()));\r\n    } else {\r\n      localStorage.removeItem(this.lockKey);\r\n    }\r\n  }\r\n}"],"names":[],"mappings":"AAAO,MAAM,MAAM;AAAA,EACjB,YAAoB,SAAS,QAAgB,UAAU,eAAe;AAAlD,SAAA,SAAA;AAAyB,SAAA,UAAA;AAAA,EAA2B;AAAA,EAExE,aAAa;AACX,UAAM,MAAM,CAAA;AACZ,eAAW,OAAO,cAAc;AAC9B,UAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,YAAI,KAAK,GAAG;AAAA,MACd;AAAA,IACF;AACO,WAAA,IAAI,IAAI,CAAK,MAAA,EAAE,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,EACjD;AAAA,EAEA,QAAQ,IAAI,IAAI,SAAS,MAAM;AAC7B,UAAM,MAAM,CAAA;AACZ,eAAW,OAAO,cAAc;AAC1B,UAAA,IAAI,UAAU,EAAG;AACrB,UAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,YAAI,KAAK,GAAG;AAAA,MACd;AAAA,IACF;AACA,QAAI,OAAY,KAAA,QAAQ,OAAK,aAAa,WAAW,CAAC,CAAC;AAChD,WAAA,IAAI,IAAI,CAAK,MAAA,EAAE,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,EACjD;AAAA,EAEA,OAAO,KAAa;AACX,WAAA,OAAO,OAAO,cAAc,GAAG,KAAK,MAAM,GAAG,GAAG,EAAE;AAAA,EAC3D;AAAA,EAEA,UAAU,KAAsB;AAC9B,iBAAa,WAAW,GAAG,KAAK,MAAM,GAAG,GAAG,EAAE;AAAA,EAChD;AAAA,EAEA,OAAO,KAAsB;AAC3B,iBAAa,QAAQ,GAAG,KAAK,MAAM,GAAG,GAAG,IAAI,EAAE;AAAA,EACjD;AAAA,EAEA,WAAW;AACT,UAAM,OAAO,SAAS,aAAa,QAAQ,KAAK,OAAO,CAAW;AAC5D,UAAA,WAAW,IAAI,KAAK;AAC1B,WAAO,EAAE,CAAC,QAAQ,KAAK,IAAA,IAAQ,OAAO;AAAA,EACxC;AAAA,EAEA,KAAK,OAAgB;AACnB,QAAI,OAAO;AACI,mBAAA,QAAQ,KAAK,SAAS,KAAK,UAAU,KAAK,IAAK,CAAA,CAAC;AAAA,IAAA,OACxD;AACQ,mBAAA,WAAW,KAAK,OAAO;AAAA,IACtC;AAAA,EACF;AACF;"}