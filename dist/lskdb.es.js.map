{"version":3,"file":"lskdb.es.js","sources":["../src/index.ts"],"sourcesContent":["export class LSKDB {\r\n  constructor(private prefix = 'lsm-', private lockKey = 'lsmngr-lock') { }\r\n\r\n  private prefixedKey(key: string | number): string {\r\n    return `${this.prefix}${key}`;\r\n  }\r\n\r\n  getAllKeys(): string[] {\r\n    const res: string[] = [];\r\n    for (const key in localStorage) {\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key.slice(this.prefix.length));\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  getKeys(n = 12, remove = true): string[] {\r\n    const res: string[] = [];\r\n    for (const key in localStorage) {\r\n      if (res.length >= n) break;\r\n      if (key.startsWith(this.prefix)) {\r\n        res.push(key.slice(this.prefix.length));\r\n      }\r\n    }\r\n    if (remove) {\r\n      res.forEach(k => this.removeKey(k));\r\n    }\r\n    return res;\r\n  }\r\n\r\n  hasKey(key: string | number): boolean {\r\n    return localStorage.getItem(this.prefixedKey(key)) !== null;\r\n  }\r\n\r\n  removeKey(key: string | number): void {\r\n    localStorage.removeItem(this.prefixedKey(key));\r\n  }\r\n\r\n  setKey(key: string | number): void {\r\n    localStorage.setItem(this.prefixedKey(key), '');\r\n  }\r\n\r\n  isLocked(): boolean {\r\n    const lock = parseInt(localStorage.getItem(this.lockKey) as string);\r\n    const locktime = 5 * 60 * 1000; // 5 minutes\r\n    return !(!lock || Date.now() - lock > locktime);\r\n  }\r\n\r\n  lock(value: boolean): void {\r\n    if (value) {\r\n      localStorage.setItem(this.lockKey, JSON.stringify(Date.now()));\r\n    } else {\r\n      localStorage.removeItem(this.lockKey);\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAO,MAAM,MAAM;AAAA,EACjB,YAAoB,SAAS,QAAgB,UAAU,eAAe;AAAlD,SAAA,SAAA;AAAyB,SAAA,UAAA;AAAA,EAA2B;AAAA,EAEhE,YAAY,KAA8B;AAChD,WAAO,GAAG,KAAK,MAAM,GAAG,GAAG;AAAA,EAC7B;AAAA,EAEA,aAAuB;AACrB,UAAM,MAAgB,CAAA;AACtB,eAAW,OAAO,cAAc;AAC9B,UAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,YAAI,KAAK,IAAI,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,MACxC;AAAA,IACF;AACO,WAAA;AAAA,EACT;AAAA,EAEA,QAAQ,IAAI,IAAI,SAAS,MAAgB;AACvC,UAAM,MAAgB,CAAA;AACtB,eAAW,OAAO,cAAc;AAC1B,UAAA,IAAI,UAAU,EAAG;AACrB,UAAI,IAAI,WAAW,KAAK,MAAM,GAAG;AAC/B,YAAI,KAAK,IAAI,MAAM,KAAK,OAAO,MAAM,CAAC;AAAA,MACxC;AAAA,IACF;AACA,QAAI,QAAQ;AACV,UAAI,QAAQ,CAAA,MAAK,KAAK,UAAU,CAAC,CAAC;AAAA,IACpC;AACO,WAAA;AAAA,EACT;AAAA,EAEA,OAAO,KAA+B;AACpC,WAAO,aAAa,QAAQ,KAAK,YAAY,GAAG,CAAC,MAAM;AAAA,EACzD;AAAA,EAEA,UAAU,KAA4B;AACpC,iBAAa,WAAW,KAAK,YAAY,GAAG,CAAC;AAAA,EAC/C;AAAA,EAEA,OAAO,KAA4B;AACjC,iBAAa,QAAQ,KAAK,YAAY,GAAG,GAAG,EAAE;AAAA,EAChD;AAAA,EAEA,WAAoB;AAClB,UAAM,OAAO,SAAS,aAAa,QAAQ,KAAK,OAAO,CAAW;AAC5D,UAAA,WAAW,IAAI,KAAK;AAC1B,WAAO,EAAE,CAAC,QAAQ,KAAK,IAAA,IAAQ,OAAO;AAAA,EACxC;AAAA,EAEA,KAAK,OAAsB;AACzB,QAAI,OAAO;AACI,mBAAA,QAAQ,KAAK,SAAS,KAAK,UAAU,KAAK,IAAK,CAAA,CAAC;AAAA,IAAA,OACxD;AACQ,mBAAA,WAAW,KAAK,OAAO;AAAA,IACtC;AAAA,EACF;AACF;"}